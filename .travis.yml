language: php

sudo: false

matrix:
  include:
    - php: 5.3
      dist: precise
      env: WITH_LOWEST=true
    - php: 5.3
      dist: precise
      env: WITH_HIGHEST=true
    - php: 5.4
      env: WITH_LOWEST=true
    - php: 5.4
      env: WITH_HIGHEST=true
    - php: 5.5
      env: WITH_LOWEST=true
    - php: 5.5
      env: WITH_HIGHEST=true
    - php: 5.6
      env: WITH_LOWEST=true
    - php: 5.6
      env: WITH_HIGHEST=true
    - php: 7.0
      env: WITH_LOWEST=true
    - php: 7.0
      env: WITH_HIGHEST=true
    - php: 7.1
      env: WITH_LOWEST=true
    - php: 7.1
      env: WITH_HIGHEST=true

install:
  - if [[ "$WITH_LOWEST" == "true" ]]; then composer update --prefer-lowest; fi
  - if [[ "$WITH_HIGHEST" == "true" ]]; then composer update; fi

before_script:
  - mkdir -p build/logs

script:
  - php vendor/bin/phpunit -c phpunit.xml.dist
